const populateChuckFact=function(fact){const factId=fact.id,factDescription=fact.description;$("#chuck-facts-area").html(`<section class='chuck-fact' data-factid='${factId}' data-description='${factDescription}'>
            <p>${fact.description}</p>
            <div class="fact-nav-icons">
                <img height="100" src="./images/icon-arrow-prev.png" alt="Previous" onclick="loadChuckFact(${factId-1}); return false;"/>
                <img height="100" src="./images/icon-arrow-next.png" alt="Next" onclick="loadChuckFact(${factId+1}); return false;"/>
            </div>
        </section>`);$("#chuck-facts-area .chuck-fact").on("click",function(){const clickedElement=$(this),className="chuck-fact-selected",isAlreadySelected=clickedElement.hasClass(className),factId=clickedElement.data("factid"),factdescription=clickedElement.data("description"),indexedDb=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;let open=indexedDb.open("ChuckNorris",1);open.onupgradeneeded=function(){let db=open.result;db.createObjectStore("FavoriteFacts",{keyPath:"id"})};open.onsuccess=function(){const db=open.result,tx=db.transaction("FavoriteFacts","readwrite"),store=tx.objectStore("FavoriteFacts");isAlreadySelected?store.delete(factId).onsuccess=()=>{clickedElement.removeClass(className)}:(store.put({id:factId,description:factdescription}).onsuccess=()=>{clickedElement.addClass(className)},tx.oncomplete=function(){db.close()})}})},loadChuckFact=function(factId){$.get(`${chuckNorrisAppSettings.apiBaseUrl}/facts/${factId||1}`).done(populateChuckFact).fail(function(jqXhr,textStatus,errorThrown){console.log(`Failed to load Chuck Fact. Error: ${errorThrown}`);$("#chuck-facts-area").html(`<section class='chuck-fact'>
                    <p>Something went wrong... Try again</p>
                    <div class="fact-nav-icons">
                        <img height="50" src="./images/icon-reload.png" alt="Previous" onclick="location.reload();"/>
                    </div>
                </section>`)}).always(()=>{$("#loader").hide()})};$(document).ready(function(){loadChuckFact()});